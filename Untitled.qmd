---
jupyter: python3
---

```{python}
#MODULE qui communique à l'API EXPLORE de synop pour récupéré les données souhaité donnée par l'utilisateur
#input :récupéré par un saisie écrite pour le moment, facilement modifiable
#sortie : python dict,le plus malléable pour exploiter la donnée en python
```

```{python}
import urllib
import json
```

```{python}
#point d'entrer a la base de donnée "donnees-synop-essentielles-omm"
url="https://public.opendatasoft.com/api/explore/v2.1/catalog/datasets/donnees-synop-essentielles-omm/records?"
```

```{python}
class HTTPSrequest_fetch :
    def __init__(self):
        self.selection=input("selection")
        self.condition=input("condition")
        self.url=url+'select='+self.selection+'&where='+self.condition+'&limit=5'+'&refine=nom_reg:'"Occitanie"''
    def get_data(self):
        with urllib.request.urlopen(self.url) as response:
            data = response.read()
        return json.loads(data.decode())
```

```{python}
'''
création d'une python class dont chaque instance est la construction de la requête https souhaité
et dont on peut exploité les donnée vias une methode de la class : get_data.
cette construction permet de concidéré chaque requête de l'uilisateur comme l'ouverture d'une instance de la class
qui peut étre manipuler d'un seul block par le reste du code
'''
```

```{python}
#exemples d'instance
#selection : nom,pres 
#condition : code_reg76
instance=HTTPSrequest_fetch()
```

```{python}
fetch.get_data()
```


